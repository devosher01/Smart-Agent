{
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_identityRegistry",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "OwnableInvalidOwner",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "OwnableUnauthorizedAccount",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "feedbackId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "agentTokenId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "client",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "rating",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "paymentProof",
          "type": "bytes32"
        }
      ],
      "name": "FeedbackSubmitted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "feedbackId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "verified",
          "type": "bool"
        }
      ],
      "name": "FeedbackVerified",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "agentFeedbacks",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "agentReputations",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalFeedbacks",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "verifiedFeedbacks",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "averageRating",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalRatingSum",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "clientFeedbacks",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "feedbacks",
      "outputs": [
        {
          "internalType": "address",
          "name": "client",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "agentTokenId",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "rating",
          "type": "uint8"
        },
        {
          "internalType": "string",
          "name": "comment",
          "type": "string"
        },
        {
          "internalType": "bytes32",
          "name": "paymentProof",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "verified",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentTokenId",
          "type": "uint256"
        }
      ],
      "name": "getAgentFeedbacks",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "feedbackId",
          "type": "uint256"
        }
      ],
      "name": "getFeedback",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "client",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "agentTokenId",
              "type": "uint256"
            },
            {
              "internalType": "uint8",
              "name": "rating",
              "type": "uint8"
            },
            {
              "internalType": "string[]",
              "name": "tags",
              "type": "string[]"
            },
            {
              "internalType": "string",
              "name": "comment",
              "type": "string"
            },
            {
              "internalType": "bytes32",
              "name": "paymentProof",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "timestamp",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "verified",
              "type": "bool"
            }
          ],
          "internalType": "struct ERC8004ReputationRegistry.Feedback",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentTokenId",
          "type": "uint256"
        }
      ],
      "name": "getReputationSummary",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalFeedbacks",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "verifiedFeedbacks",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "averageRating",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentTokenId",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "tag",
          "type": "string"
        }
      ],
      "name": "getTagCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "identityRegistry",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_identityRegistry",
          "type": "address"
        }
      ],
      "name": "setIdentityRegistry",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "agentTokenId",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "rating",
          "type": "uint8"
        },
        {
          "internalType": "string[]",
          "name": "tags",
          "type": "string[]"
        },
        {
          "internalType": "string",
          "name": "comment",
          "type": "string"
        },
        {
          "internalType": "bytes32",
          "name": "paymentProof",
          "type": "bytes32"
        }
      ],
      "name": "submitFeedback",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "feedbackId",
          "type": "uint256"
        },
        {
          "internalType": "bytes32",
          "name": "paymentProof",
          "type": "bytes32"
        }
      ],
      "name": "verifyFeedback",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b506040516114fc3803806114fc83398101604081905261002f916100d4565b338061005557604051631e4fbdf760e01b81526000600482015260240160405180910390fd5b61005e81610084565b50600680546001600160a01b0319166001600160a01b0392909216919091179055610104565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000602082840312156100e657600080fd5b81516001600160a01b03811681146100fd57600080fd5b9392505050565b6113e9806101136000396000f3fe608060405234801561001057600080fd5b50600436106100f55760003560e01c80638da5cb5b11610097578063c77fc39d11610066578063c77fc39d14610293578063cbf3f861146102a6578063f145d69a146102b9578063f2fde38b146102cc57600080fd5b80638da5cb5b146101d2578063945471ae146101e35780639f1a406a146101f6578063b9b1f48c1461024b57600080fd5b80632bb8b0dc116100d35780632bb8b0dc1461016f5780634c7a7bc81461019557806368cdf0fd146101a8578063715018a6146101c857600080fd5b80631106a382146100fa578063134e18f4146101235780631b80acc21461014e575b600080fd5b61010d610108366004610d31565b6102df565b60405161011a9190610df2565b60405180910390f35b600654610136906001600160a01b031681565b6040516001600160a01b03909116815260200161011a565b61016161015c366004610e8e565b6104ef565b60405190815260200161011a565b61018261017d366004610d31565b610520565b60405161011a9796959493929190610eb0565b6101616101a3366004610f1d565b6105f9565b6101bb6101b6366004610d31565b610615565b60405161011a9190610f47565b6101d0610677565b005b6000546001600160a01b0316610136565b6101d06101f1366004610e8e565b61068b565b61022b610204366004610d31565b60046020526000908152604090208054600182015460028301546003909301549192909184565b60408051948552602085019390935291830152606082015260800161011a565b610278610259366004610d31565b6000908152600460205260409020805460018201546002909201549092565b6040805193845260208401929092529082015260600161011a565b6101616102a1366004611042565b610826565b6101d06102b4366004611089565b61085f565b6101616102c73660046110ab565b610889565b6101d06102da366004611089565b610bb9565b60408051610100810182526000808252602082018190529181018290526060808201819052608082015260a0810182905260c0810182905260e0810191909152600082815260016020818152604080842081516101008101835281546001600160a01b031681529381015484840152600281015460ff16848301526003810180548351818602810186019094528084529495919460608701949192909184015b8282101561042b57838290600052602060002001805461039e906111bd565b80601f01602080910402602001604051908101604052809291908181526020018280546103ca906111bd565b80156104175780601f106103ec57610100808354040283529160200191610417565b820191906000526020600020905b8154815290600101906020018083116103fa57829003601f168201915b50505050508152602001906001019061037f565b505050508152602001600482018054610443906111bd565b80601f016020809104026020016040519081016040528092919081815260200182805461046f906111bd565b80156104bc5780601f10610491576101008083540402835291602001916104bc565b820191906000526020600020905b81548152906001019060200180831161049f57829003601f168201915b5050509183525050600582015460208201526006820154604082015260079091015460ff16151560609091015292915050565b6002602052816000526040600020818154811061050b57600080fd5b90600052602060002001600091509150505481565b600160208190526000918252604090912080549181015460028201546004830180546001600160a01b0390951694929360ff9092169261055f906111bd565b80601f016020809104026020016040519081016040528092919081815260200182805461058b906111bd565b80156105d85780601f106105ad576101008083540402835291602001916105d8565b820191906000526020600020905b8154815290600101906020018083116105bb57829003601f168201915b50505050600583015460068401546007909401549293909290915060ff1687565b6003602052816000526040600020818154811061050b57600080fd5b60008181526002602090815260409182902080548351818402810184019094528084526060939283018282801561066b57602002820191906000526020600020905b815481526020019060010190808311610657575b50505050509050919050565b61067f610bf7565b6106896000610c24565b565b610693610bf7565b6000828152600160205260409020546001600160a01b03166106fc5760405162461bcd60e51b815260206004820152601760248201527f466565646261636b20646f6573206e6f7420657869737400000000000000000060448201526064015b60405180910390fd5b60008281526001602052604090206007015460ff161561075e5760405162461bcd60e51b815260206004820152601960248201527f466565646261636b20616c72656164792076657269666965640000000000000060448201526064016106f3565b806107a35760405162461bcd60e51b815260206004820152601560248201527424b73b30b634b2103830bcb6b2b73a10383937b7b360591b60448201526064016106f3565b60008281526001602081815260408084206005810186905560078101805460ff19168517905583015480855260049092528320909101805491926107e68361120d565b90915550506040516001815283907f2a9c81084802a16c09beca5710664c975fcc5b52c876985dea2877c5e3de7aa79060200160405180910390a2505050565b60008281526004602081905260408083209051910190610847908490611226565b90815260200160405180910390205490505b92915050565b610867610bf7565b600680546001600160a01b0319166001600160a01b0392909216919091179055565b600060018560ff16101580156108a3575060058560ff1611155b6108ef5760405162461bcd60e51b815260206004820152601e60248201527f526174696e67206d757374206265206265747765656e203120616e642035000060448201526064016106f3565b6006546001600160a01b03166109475760405162461bcd60e51b815260206004820152601960248201527f4964656e74697479207265676973747279206e6f74207365740000000000000060448201526064016106f3565b600580549060006109578361120d565b9091555050600554604080516101008101825233815260208082018a815260ff8a8116848601908152606085018b8152608086018b905260a086018a90524260c087015289151560e0870181905260008981526001808852989020875181546001600160a01b0319166001600160a01b03909116178155945197850197909755905160028401805460ff191691909316179091555180519192610a0292600385019290910190610c74565b5060808201516004820190610a179082611291565b5060a0820151600582015560c0820151600682015560e0909101516007909101805460ff191691151591909117905560008881526002602090815260408083208054600181810183559185528385200186905533845260038352818420805491820181558452828420018590558a835260049091528120805490918290610a9d8361120d565b91905055508115610ac057600181018054906000610aba8361120d565b91905055505b8760ff16816003016000828254610ad79190611351565b909155505080546003820154610aee906064611364565b610af8919061137b565b600282015560005b8751811015610b695781600401888281518110610b1f57610b1f61139d565b6020026020010151604051610b349190611226565b9081526040519081900360200190208054906000610b518361120d565b91905055508080610b619061120d565b915050610b00565b506040805160ff8a1681526020810187905233918b9186917f05edd034cc8123717d974cdaaaca8453dbbbbc068eefc9e27464230cb7bb2a19910160405180910390a45090979650505050505050565b610bc1610bf7565b6001600160a01b038116610beb57604051631e4fbdf760e01b8152600060048201526024016106f3565b610bf481610c24565b50565b6000546001600160a01b031633146106895760405163118cdaa760e01b81523360048201526024016106f3565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b828054828255906000526020600020908101928215610cba579160200282015b82811115610cba5782518290610caa9082611291565b5091602001919060010190610c94565b50610cc6929150610cca565b5090565b80821115610cc6576000610cde8282610ce7565b50600101610cca565b508054610cf3906111bd565b6000825580601f10610d03575050565b601f016020900490600052602060002090810190610bf491905b80821115610cc65760008155600101610d1d565b600060208284031215610d4357600080fd5b5035919050565b60005b83811015610d65578181015183820152602001610d4d565b50506000910152565b60008151808452610d86816020860160208601610d4a565b601f01601f19169290920160200192915050565b600082825180855260208086019550808260051b84010181860160005b84811015610de557601f19868403018952610dd3838351610d6e565b98840198925090830190600101610db7565b5090979650505050505050565b602080825282516001600160a01b03168282015282015160408083019190915282015160ff81166060830152600090506060830151610100806080850152610e3e610120850183610d9a565b91506080850151601f198584030160a0860152610e5b8382610d6e565b92505060a085015160c085015260c085015160e085015260e0850151610e848286018215159052565b5090949350505050565b60008060408385031215610ea157600080fd5b50508035926020909101359150565b60018060a01b038816815286602082015260ff8616604082015260e060608201526000610ee060e0830187610d6e565b60808301959095525060a0810192909252151560c090910152949350505050565b80356001600160a01b0381168114610f1857600080fd5b919050565b60008060408385031215610f3057600080fd5b610f3983610f01565b946020939093013593505050565b6020808252825182820181905260009190848201906040850190845b81811015610f7f57835183529284019291840191600101610f63565b50909695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f1916810167ffffffffffffffff81118282101715610fca57610fca610f8b565b604052919050565b600082601f830112610fe357600080fd5b813567ffffffffffffffff811115610ffd57610ffd610f8b565b611010601f8201601f1916602001610fa1565b81815284602083860101111561102557600080fd5b816020850160208301376000918101602001919091529392505050565b6000806040838503121561105557600080fd5b82359150602083013567ffffffffffffffff81111561107357600080fd5b61107f85828601610fd2565b9150509250929050565b60006020828403121561109b57600080fd5b6110a482610f01565b9392505050565b600080600080600060a086880312156110c357600080fd5b8535945060208087013560ff811681146110dc57600080fd5b9450604087013567ffffffffffffffff808211156110f957600080fd5b818901915089601f83011261110d57600080fd5b81358181111561111f5761111f610f8b565b8060051b61112e858201610fa1565b918252838101850191858101908d84111561114857600080fd5b86860192505b83831015611184578235858111156111665760008081fd5b6111748f89838a0101610fd2565b835250918601919086019061114e565b9850505050606089013592508083111561119d57600080fd5b50506111ab88828901610fd2565b95989497509295608001359392505050565b600181811c908216806111d157607f821691505b6020821081036111f157634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052601160045260246000fd5b60006001820161121f5761121f6111f7565b5060010190565b60008251611238818460208701610d4a565b9190910192915050565b601f82111561128c57600081815260208120601f850160051c810160208610156112695750805b601f850160051c820191505b8181101561128857828155600101611275565b5050505b505050565b815167ffffffffffffffff8111156112ab576112ab610f8b565b6112bf816112b984546111bd565b84611242565b602080601f8311600181146112f457600084156112dc5750858301515b600019600386901b1c1916600185901b178555611288565b600085815260208120601f198616915b8281101561132357888601518255948401946001909101908401611304565b50858210156113415787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b80820180821115610859576108596111f7565b8082028115828204841417610859576108596111f7565b60008261139857634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052603260045260246000fdfea264697066735822122029aed12bdfe198d11501d2c4c9359631d94460302450f4df4799d5fcda81545764736f6c63430008140033"
}